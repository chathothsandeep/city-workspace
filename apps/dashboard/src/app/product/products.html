@if(loading){
<app-table-skelton
  [headerTitles]="['Image', 'Name', 'Price', 'Model', 'Actions']"
></app-table-skelton>
} @else{
<div class="flex flex-col">
  <div class="flex flex-row justify-content-between items-center w-full mb-4">
    <h1 class="text-xl font-bold">Products</h1>
    <div class="ml-auto flex gap-2">
      <p-button
        type="button"
        icon="pi pi-trash"
        pRipple
        label="Delete"
        severity="danger"
        (onClick)="showMultipleDeleteDialog()"
        [disabled]="!selectedProducts || object.keys(selectedProducts).length === 0"
      />
      <p-button
        type="button"
        icon="pi pi-plus"
        pRipple
        label="Create Product"
        (onClick)="gotoCreateProduct()"
      />
    </div>
  </div>

  <div class="card">
    <p-table [value]="products()" [rowTrackBy]="trackByFn">
      <ng-template #header>
        <tr>
          <th>
            <p-checkbox
              [binary]="true"
              (onChange)="selectAllProducts($event)"
            ></p-checkbox>
          </th>
          <th>Image</th>
          <th>Name</th>
          <th>Price</th>
          <th>Model</th>
          <th>Actions</th>
        </tr>
      </ng-template>
      <ng-template #body let-product>
        <tr>
          <td>
            <p-checkbox
              [binary]="true"
              [(ngModel)]="selectedProducts[product.id]"
            ></p-checkbox>
          </td>
          <td>
            <div class="w-20 h-16 flex items-center p-2 rounded-lg">
              <img
                ngSrc="{{ product.image ? webUrl.SERVER_BASE_URL + product.image : './.././../assets/images/no-pic.jpg' }}"
                alt="product.name"
                width="100"
                height="80"
              />
            </div>
          </td>
          <td>{{ product.name }}</td>
          <td>{{ product.price }}</td>
          <td>{{ product.barcode }}</td>
          <td>
            <p-select
              [options]="options"
              [(ngModel)]="selectedOptions[product.id]"
              variant="filled"
              placeholder="Select Action"
              size="small"
              filled
              (onChange)="onSelectChange($event, product)"
              appendTo="body"
            />
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  <app-dialog
    [visible]="isDeleteDialogVisible()"
    title="Delete Product"
    message="Are you sure? You want to delete this product?"
    okText="Delete"
    (okEvent)="onDelete()"
    (cancelEvent)="hideDeleteDialog()"
    [loading]="isDeleteLoading()"
  ></app-dialog>

  <app-dialog
    [visible]="isMultipleDeleteDialogVisible()"
    title="Delete Products"
    message="Are you sure? You want to delete these products?"
    okText="Delete"
    (okEvent)="onDeleteMultiple()"
    (cancelEvent)="hideMultipleDeleteDialog()"
    [loading]="isDeleteLoading()"
  ></app-dialog>
</div>
}
